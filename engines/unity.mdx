---
title: "Unity Integration"
description: "Set up Wavedash for Unity WebGL builds"
---

This guide walks you through integrating Wavedash into your Unity project, from initial setup to publishing your WebGL game.

## Requirements

- Unity 6000+ recommended
- WebGL build support installed
- A Wavedash account and game created

## Project setup

### 1. Install the Wavedash CLI

<Tabs>
  <Tab title="macOS">
    ```bash
    brew install wvdsh/tap/wvdsh
    ```
  </Tab>
  <Tab title="Linux">
    ```bash
    curl --proto '=https' --tlsv1.2 -LsSf https://github.com/wvdsh/cli/releases/latest/download/wvdsh-installer.sh | sh
    ```
  </Tab>
  <Tab title="Windows">
    ```powershell
    irm https://github.com/wvdsh/cli/releases/latest/download/wvdsh-installer.ps1 | iex
    ```
  </Tab>
</Tabs>

### 2. Install the Wavedash Unity SDK

1. Download the SDK from the Wavedash dashboard or clone the repository
2. In Unity, open **Window → Package Manager**
3. Click the **+** button → **Add package from disk...**
4. Select the `package.json` file from the SDK folder

### 3. Create wavedash.toml

In your Unity project root, create `wavedash.toml`:

```toml wavedash.toml
org_slug = "your-org"
game_slug = "your-game"
branch_slug = "production"
upload_dir = "./Build/WebGL"

[unity]
version = "6000.0.2f1"
```

<Note>
Set `upload_dir` to where your Unity WebGL build is saved.
</Note>

### 4. Configure WebGL build settings

1. Open **File > Build Settings**
2. Select **WebGL** and click **Switch Platform**
3. Configure **Player Settings** for WebGL:

**Recommended settings:**
- **Compression Format**: Gzip or Brotli
- **Memory Size**: 256 MB (adjust based on your game)
- **Publishing Settings > Decompression Fallback**: Enabled

## SDK integration

### Initialize the SDK

```csharp
using Wavedash;
using System.Collections.Generic;

public class GameManager : MonoBehaviour
{
    void Start()
    {
        // Initialize once at game start
        SDK.Init(new Dictionary<string, object>
        {
            { "debug", true }
        });

        // SDK is ready immediately after Init
        if (SDK.IsReady())
        {
            var user = SDK.GetUser();
            Debug.Log($"Playing as: {user["username"]}");
        }
    }
}
```

### Subscribe to events

```csharp
using Wavedash;

public class LobbyManager : MonoBehaviour
{
    void Awake()
    {
        // Subscribe to events
        SDK.OnLobbyJoined += HandleLobbyJoined;
        SDK.OnLobbyLeft += HandleLobbyLeft;
        SDK.OnLobbyMessage += HandleLobbyMessage;
        SDK.OnP2PConnectionEstablished += HandleP2PConnected;
        SDK.OnP2PConnectionFailed += HandleP2PFailed;
        SDK.OnP2PPeerDisconnected += HandleP2PDisconnected;
    }

    void OnDestroy()
    {
        // Unsubscribe on destroy
        SDK.OnLobbyJoined -= HandleLobbyJoined;
        SDK.OnLobbyLeft -= HandleLobbyLeft;
        SDK.OnLobbyMessage -= HandleLobbyMessage;
        SDK.OnP2PConnectionEstablished -= HandleP2PConnected;
        SDK.OnP2PConnectionFailed -= HandleP2PFailed;
        SDK.OnP2PPeerDisconnected -= HandleP2PDisconnected;
    }

    void HandleLobbyJoined(Dictionary<string, object> data)
    {
        Debug.Log($"Joined lobby: {data["id"]}");
    }

    void HandleLobbyLeft(Dictionary<string, object> data)
    {
        Debug.Log("Left lobby");
    }

    void HandleLobbyMessage(Dictionary<string, object> data)
    {
        Debug.Log($"Message: {data["content"]}");
    }

    void HandleP2PConnected(Dictionary<string, object> data)
    {
        Debug.Log($"P2P connected to: {data["userId"]}");
    }

    void HandleP2PFailed(Dictionary<string, object> data)
    {
        Debug.Log("P2P connection failed");
    }

    void HandleP2PDisconnected(Dictionary<string, object> data)
    {
        Debug.Log($"P2P peer disconnected: {data["userId"]}");
    }
}
```

## Leaderboards

```csharp
using Wavedash;

public class LeaderboardManager : MonoBehaviour
{
    private string leaderboardId;

    async void Start()
    {
        // Get a leaderboard by name
        var leaderboard = await SDK.GetLeaderboard("high-scores");
        if (leaderboard != null)
        {
            leaderboardId = leaderboard["id"].ToString();
            Debug.Log($"Leaderboard: {leaderboard["name"]}");
        }
    }

    public async void SubmitScore(int score)
    {
        if (string.IsNullOrEmpty(leaderboardId)) return;

        var result = await SDK.UploadLeaderboardScore(
            leaderboardId,
            score,
            keepBest: true
        );

        if (result != null)
        {
            Debug.Log("Score submitted!");
        }
    }

    public async void GetTopScores()
    {
        var entries = await SDK.ListLeaderboardEntries(
            leaderboardId,
            offset: 0,
            limit: 10
        );

        foreach (var entry in entries)
        {
            Debug.Log($"#{entry["rank"]} {entry["username"]}: {entry["score"]}");
        }
    }

    public async void GetScoresAroundMe()
    {
        var entries = await SDK.ListLeaderboardEntriesAroundUser(
            leaderboardId,
            countAhead: 5,
            countBehind: 5
        );

        foreach (var entry in entries)
        {
            Debug.Log($"#{entry["rank"]} {entry["username"]}: {entry["score"]}");
        }
    }
}
```

## Lobbies

```csharp
using Wavedash;

public class MultiplayerManager : MonoBehaviour
{
    private string currentLobbyId;

    public async void CreateLobby()
    {
        // Lobby types: 0 = public, 1 = friends only, 2 = private
        var lobbyId = await SDK.CreateLobby(
            lobbyType: 0,
            maxPlayers: 4
        );

        if (!string.IsNullOrEmpty(lobbyId))
        {
            currentLobbyId = lobbyId;
            Debug.Log($"Created lobby: {lobbyId}");
        }
    }

    public async void JoinLobby(string lobbyId)
    {
        var result = await SDK.JoinLobby(lobbyId);
        if (!string.IsNullOrEmpty(result))
        {
            currentLobbyId = lobbyId;
        }
    }

    public async void LeaveLobby()
    {
        if (!string.IsNullOrEmpty(currentLobbyId))
        {
            await SDK.LeaveLobby(currentLobbyId);
            currentLobbyId = null;
        }
    }

    public async void ListLobbies()
    {
        var lobbies = await SDK.ListAvailableLobbies();
        foreach (var lobby in lobbies)
        {
            Debug.Log($"Lobby: {lobby["id"]}");
        }
    }
}
```

## P2P messaging

```csharp
using Wavedash;

public class P2PManager : MonoBehaviour
{
    // Broadcast to all peers
    public void BroadcastMessage(byte[] data, int channel = 0, bool reliable = true)
    {
        SDK.BroadcastP2PMessage(data, channel, reliable);
    }

    // Send to specific peer
    public void SendToPeer(string userId, byte[] data, int channel = 0, bool reliable = true)
    {
        SDK.SendP2PMessage(userId, data, channel, reliable);
    }
}
```

## Remote storage

```csharp
using Wavedash;
using UnityEngine;

public class SaveManager : MonoBehaviour
{
    public async void SaveGame(string saveData)
    {
        // Write to persistent data path first
        string path = $"{Application.persistentDataPath}/saves/slot1.json";
        System.IO.Directory.CreateDirectory(System.IO.Path.GetDirectoryName(path));
        System.IO.File.WriteAllText(path, saveData);

        // Upload to cloud
        var result = await SDK.UploadRemoteFile(path);
        if (!string.IsNullOrEmpty(result))
        {
            Debug.Log("Save uploaded!");
        }
    }

    public async void LoadGame()
    {
        string path = $"{Application.persistentDataPath}/saves/slot1.json";

        var result = await SDK.DownloadRemoteFile(path);
        if (!string.IsNullOrEmpty(result))
        {
            string saveData = System.IO.File.ReadAllText(path);
            Debug.Log($"Loaded save: {saveData}");
        }
    }

    public async void ListSaves()
    {
        string path = $"{Application.persistentDataPath}/saves/";
        var files = await SDK.ListRemoteDirectory(path);

        foreach (var file in files)
        {
            Debug.Log($"Save file: {file["path"]}");
        }
    }
}
```

## Available events

| Event | Description |
|-------|-------------|
| `SDK.OnLobbyJoined` | Player joined a lobby |
| `SDK.OnLobbyLeft` | Player left a lobby |
| `SDK.OnLobbyMessage` | Received a lobby chat message |
| `SDK.OnP2PConnectionEstablished` | P2P connection established with peer |
| `SDK.OnP2PConnectionFailed` | P2P connection failed |
| `SDK.OnP2PPeerDisconnected` | P2P peer disconnected |

## Testing locally

Run the development server:

```bash
wvdsh dev
```

## Building and publishing

### 1. Build your game

1. Open **File > Build Settings**
2. Select **WebGL**
3. Click **Build**
4. Save to your `upload_dir` folder

### 2. Push to Wavedash

```bash
wvdsh build push
```

## Example project structure

```
my-unity-game/
├── Assets/
│   ├── Scripts/
│   │   ├── GameManager.cs
│   │   ├── LeaderboardManager.cs
│   │   └── MultiplayerManager.cs
│   └── Scenes/
│       └── Main.unity
├── Build/
│   └── WebGL/         # WebGL build output
├── Packages/
│   └── manifest.json  # References Wavedash SDK
├── ProjectSettings/
└── wavedash.toml
```
